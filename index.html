<!DOCTYPE html>
<html>
<head>
    <title>DRINX ‚Äî –û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</title>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: #1a1a1a;
            color: #fff;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 40px;
        }
        input, button {
            margin: 10px 0;
            padding: 12px;
            width: 100%;
            max-width: 300px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>–ó–∞—è–≤–∫–∞ DRINX</h1>
    <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω:</p>

    <input type="text" id="name" placeholder="–ò–º—è">
    <input type="text" id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">

    <button onclick="submitForm()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>

    <div class="hidden" id="debug">Debug info</div>

    <script>
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤–Ω—É—Ç—Ä–∏ Telegram Mini App
        if (!window.Telegram || !window.Telegram.WebApp) {
            document.body.innerHTML = "<p style='color:red;'>‚ö†Ô∏è –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Telegram</p>";
            throw new Error("Mini App –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω");
        }

        const tg = window.Telegram.WebApp;
        tg.expand();  // –†–∞—Å—à–∏—Ä—è–µ–º –æ–∫–Ω–æ

        function submitForm() {
            const name = document.getElementById("name").value.trim();
            const phone = document.getElementById("phone").value.trim();

            if (!name || !phone) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è");
                return;
            }

            const data = {
                name: name,
                phone: phone,
                type: "test"
            };

            console.log("üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:", JSON.stringify(data));

            try {
                tg.sendData(JSON.stringify(data));
                document.getElementById("debug").textContent = "‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞";
                document.getElementById("debug").classList.remove("hidden");

                setTimeout(() => {
                    tg.showAlert("–í–∞—à–∞ –∑–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!");
                    tg.close();
                }, 1000);
            } catch (error) {
                console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ:", error.message);
                tg.showAlert("‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
            }
        }
    </script>
</body>
</html>
